{{define "title"}}ShushTLS — Trust Installation{{end}}
{{define "content"}}
<h1>Install Root CA</h1>

{{if eq .State "uninitialized"}}
<article>
  <p>The root CA has not been generated yet. <a href="/setup">Run setup first.</a></p>
</article>
{{else}}

<p>
  Download the root CA certificate and install it on each device that needs to
  trust your internal HTTPS services. This is a one-time step per device.
</p>

<p><a href="/api/ca/root.pem" role="button">Download Root CA (PEM)</a></p>

<h2>One-Line Installers</h2>
<p>Run one of these commands on the target device to download and install the root CA automatically:</p>

<article>
  <header><strong>macOS</strong></header>
  <pre><code>curl -fsSL {{.BaseURL}}/api/ca/install/macos | bash</code></pre>
</article>

<article>
  <header><strong>Linux (Debian/Ubuntu/RHEL/Fedora)</strong></header>
  <pre><code>curl -fsSL {{.BaseURL}}/api/ca/install/linux | sudo bash</code></pre>
</article>

<article>
  <header><strong>Windows (PowerShell as Administrator)</strong></header>
  <pre><code>irm {{.BaseURL}}/api/ca/install/windows | iex</code></pre>
</article>

<h2>Manual Installation</h2>

<details>
  <summary>macOS — manual steps</summary>
  <pre><code>sudo security add-trusted-cert -d -r trustRoot \
  -k /Library/Keychains/System.keychain shushtls-root-ca.pem</code></pre>
  <p>Or: open the .pem file, add to System keychain, then set to "Always Trust" in Keychain Access.</p>
</details>

<details>
  <summary>Linux (Debian/Ubuntu) — manual steps</summary>
  <pre><code>sudo cp shushtls-root-ca.pem /usr/local/share/ca-certificates/shushtls-root-ca.crt
sudo update-ca-certificates</code></pre>
</details>

<details>
  <summary>Linux (RHEL/Fedora) — manual steps</summary>
  <pre><code>sudo cp shushtls-root-ca.pem /etc/pki/ca-trust/source/anchors/shushtls-root-ca.pem
sudo update-ca-trust</code></pre>
</details>

<details>
  <summary>Windows — manual steps</summary>
  <pre><code>Import-Certificate -FilePath shushtls-root-ca.pem -CertStoreLocation Cert:\LocalMachine\Root</code></pre>
  <p>Run PowerShell as Administrator. Or: double-click the file &rarr; Install Certificate &rarr; Local Machine &rarr; Trusted Root Certification Authorities.</p>
</details>

<article>
  <header><strong>iOS</strong></header>
  <ol>
    <li>Download the .pem file (email it to yourself or use AirDrop).</li>
    <li>Open it &mdash; iOS will prompt to install a profile.</li>
    <li>Go to <strong>Settings &rarr; General &rarr; VPN &amp; Device Management</strong> and install the profile.</li>
    <li>Go to <strong>Settings &rarr; General &rarr; About &rarr; Certificate Trust Settings</strong> and enable full trust.</li>
  </ol>
</article>

<article>
  <header><strong>Android</strong></header>
  <ol>
    <li>Copy the .pem file to the device.</li>
    <li>Go to <strong>Settings &rarr; Security &rarr; Encryption &amp; credentials &rarr; Install a certificate &rarr; CA certificate</strong>.</li>
    <li>Select the .pem file and confirm.</li>
  </ol>
  <p><small>Note: Android apps must opt in to user-installed CAs (network security config). System-level trust requires a rooted device.</small></p>
</article>

{{end}}
{{end}}
